/*!
Resourcy v1.1.0

Resourcy is an unobtrusive RESTful adapter for jquery-ujs and Rails.

Documentation and other useful information can be found at
https://github.com/jejacks0n/resourcy

Copyright (c) 2012 Jeremy Jackson

https://raw.github.com/jejacks0n/resourcy/master/LICENSE
*/
(function(){var e,t,n,r,i,s,o,u,a,f,l=this;a={},o=["get","put","post","delete"],e=["index","create","new","edit","show","update","delete"],r={plural:[["get",""],["post",""],["get","/new"],["get","/:id/edit"],["get","/:id"],["put","/:id"],["delete","/:id"]],singular:[null,["post",""],["get","/new"],["get","/edit"],["get",""],["put",""],["delete",""]]},u=function(e){var t,n;return e=e.match(/^((http[s]?|ftp):\/\/)?(((.+)@)?([^:\/\?#\s]+)(:(\d+))?)?(\/?[^\?#\.]+)?(\.([^\?#]+))?(\?([^#]*))?(#(.*))?$/i)||[],t=((n=e[9])!=null?n.match(/(\/.*)\/+(\w+)$/i):void 0)||[],{scheme:e[2],credentials:e[5],host:e[6],port:e[8],path:e[9],action:t[2]||"",format:e[11],query:e[13],hash:e[15]}},n=function(n,i,s){return i==null&&(i=!1),s==null&&(s={}),a[n]?a[n]:a[n]={path:new RegExp("^"+(n[0]==="/"?n:"/"+n).replace(/:\w+/ig,"(\\w+)")+"/?(\\w+)?/?(\\w+)?/?($|\\?|\\.|#)","i"),pathvars:(n.match(/:(\w+)/ig)||[]).join("|").replace(/:/g,"").split("|"),actions:{},defaults:s,singular:i,name:n.substr(n.lastIndexOf("/")+1),options:function(e){return e==null&&(e={}),this.defaults=e,this},add:function(e,n){var r,i,s;i={},typeof e=="string"?i[e]=n:i=e;for(e in i)n=i[e],s=e.split(":"),r=s[0],e=s[1],t.call(this,r,e,n);return this},remove:function(e){var t,n;return n=e.split(":"),t=n[0],e=n[1],e?delete this.actions[t][e]:delete this.actions[t],this},removeAll:function(){return this.actions={},this},describe:function(){var t,i,s,u,a,f,l,c,h,p,d;a=[];for(l=0,h=o.length;l<h;l++){u=o[l];for(t in this.actions[u])a.push(""+n+"/"+t+" "+u.toUpperCase()+" => "+this.name+"#"+t)}p=this.singular?[1,r.singular]:[0,r.plural],f=p[0],i=p[1];for(s=c=f,d=e.length-1;f<=d?c<=d:c>=d;s=f<=d?++c:--c)this.actions[e[s]]&&a.push(""+n+i[s][1]+" "+i[s][0].toUpperCase()+" => "+this.name+"#"+e[s]);return a}}},t=function(e,t,n){var r,i;r="The "+[e,t].join(":").replace(/:$/,"")+" action already exists on the '"+this.name+"' resource. Try removing it first.";if(t){(i=this.actions)[e]||(i[e]={});if(this.actions[e][t])throw r;return this.actions[e][t]=n}if(this.actions[e])throw r;if(this.singular&&e==="index")throw"Adding index to '"+this.name+"' isn't possible (singular resource).";return this.actions[e]=n},s=function(e,t,n,r,s){var o,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;e=e.toLowerCase(),T=w=u(t),d=T.path,o=T.action,l={},g=!1,m=function(e){return g=!0,r(t,s(n||{},e||{},l))};for(h in a){y=a[h];if(!(p=d.match(y.path)))continue;if(f=i(y,o,e,p[p.length-2],p[p.length-3])){l=y.defaults,E={},N=y.pathvars;for(c=S=0,x=N.length;S<x;c=++S)v=N[c],E[v]=p[c+1];b=f(m,E,w)}if(b!==!1&&!g)return m(b);return}return r(t,n)},i=function(e,t,n,r,i){var s,o,u,a;switch(n){case"get":if((s=e.actions.get)!=null?s[t]:void 0)return e.actions.get[t];switch(i?t:""){case"":return e.singular?e.actions.show:e.actions.index;case"new":return e.actions["new"];case"edit":return e.actions.edit;default:if(!r)return e.actions.show}break;case"put":return((o=e.actions.put)!=null?o[t]:void 0)||(r?void 0:e.actions.update);case"post":return((u=e.actions.post)!=null?u[t]:void 0)||(i?void 0:e.actions.create);case"delete":return((a=e.actions["delete"])!=null?a[t]:void 0)||(r?void 0:e.actions.destroy)}},this.Resourcy={removeAll:function(){return a={}},handleRequest:s,noConflict:((f=this.Resourcy)!=null?f.noConflict:void 0)||function(){return delete Resourcy},resources:function(e,t,r){return t==null&&(t={}),r==null&&(r={}),n(e,!1,t).add(r)},resource:function(e,t,r){return t==null&&(t={}),r==null&&(r={}),n(e,!0,t).add(r)},routes:function(){var e,t,n;n={};for(e in a)t=a[e],n[t.name]=t.describe();return n}}}).call(this),function(){var e,t,n;n=jQuery.ajax,jQuery.extend(jQuery,{originalAjax:n,resources:Resourcy.resources,resource:Resourcy.resource,routes:Resourcy.routes}),e=Resourcy.handleRequest,Resourcy.noConflict(),t=function(e,t,n){var r,i,s,o,u,a,f;n==null&&(n={}),o=jQuery.extend(!0,{},e,t,n),f=["beforeSend","error","dataFilter","success","complete"];for(u=0,a=f.length;u<a;u++)s=f[u],e[s]&&t[s]&&(r=e[s],i=t[s],o[s]=function(){return r.apply(window,arguments),i.apply(window,arguments)});return o},jQuery.ajax=function(n,r){var i,s,o,u,a;r==null&&(r={}),typeof n=="object"&&(r=n,n=r.url),a=r.data||[];for(o=0,u=a.length;o<u;o++){i=a[o];if(i.name==="_method"){s=i.value;break}}return e(s||r.type||"get",n,r,jQuery.originalAjax,t)}}.call(this);